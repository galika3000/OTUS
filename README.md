# Домашнее задание по уроку "Анализ лога веб-сервера"

1. В файле acc1.py находится код.

2. В файле access.png находится снимок экрана с запуском скрипта с вводом имени файла в качестве аргумента командной строки

## Алгоритм:

### Парсинг командной строки:

В качестве необязательного аргумента -d принимается путь к файлу с логами или сам файл с логами. По умолчанию это директория, где расположен сам исполняемый файл, и файл с логами, приложенный к заданию.

Если в качестве аргумента командной строки при запуске скрипта получен путь к папке с файлами, то последовательно перебираем все файлы в этой папке, находим файл с расширением .log, собираем из пути и его имени полный путь и выполняем функцию create_list с полученным полным путём в качестве аргумента.

Если в качестве аргумента командной строки при запуске скрипта получено имя файла, выполняем функцию create_list с этим файлом в качестве аргумента.

### Функция create_list:

Проверяет, существует ли указанный ей файл с логами.

В цикле по строкам файла выполняет парсинг каждой строки с помощью функции parse_log.

Из строки, разобранной на группы, выбирает 5 нужных групп (ip, date, method, url, duration), собирает в список и сохраняет в списке списков result_array.

Из этого списка будет собираться словарь со статистикой. Для каждого раздела статистики написана функция, которая анализирует собранные данные:

- **total_requests:** общее количество выполненных запросов; считается на месте.

- **total_stats:** количество запросов по HTTP-методам: GET, POST, PUT, DELETE, OPTIONS, HEAD.

- **top_ips:** топ 3 IP-адреса, с которых было сделано наибольшее количество запросов.

- **top_longest:** топ 3 самых долгих запросов — должны выводиться HTTP-метод, URL, IP, длительность запроса, дата и время запроса.

После вычисления, статистика выводится на экран и записывается в файл в формате json. 
